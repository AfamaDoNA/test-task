{"info":{"_postman_id":"93b05f86-31de-442d-b7b7-e0cdddc7aa22","name":"Test","schema":"https://schema.getpostman.com/json/collection/v2.1.0/collection.json"},"item":[{"name":"Authorization","event":[{"listen":"test","script":{"id":"1e45ac6f-c4f9-414e-a0ad-8ada24f2e4f4","exec":["pm.test(\"Status code is 200\", function () {\r","    pm.response.to.have.status(200);   \r","});\r","if(pm.response.code == 200){\r","    var jsonData = JSON.parse(responseBody)\r","    pm.environment.set(\"token\", jsonData.token) \r","}"],"type":"text/javascript"}},{"listen":"prerequest","script":{"id":"1e34823b-457a-4ebf-9c23-cddd2fafc343","exec":[""],"type":"text/javascript"}}],"id":"ef6b11ae-e6ac-4913-9711-023f7c5faf7b","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[],"body":{"mode":"formdata","formdata":[{"key":"username","value":" qa@qa.qa","type":"text"},{"key":"password","value":"111","type":"text"}]},"url":{"raw":"{{url}}v1/users/obtain-token","host":["{{url}}v1"],"path":["users","obtain-token"]}},"response":[{"id":"80ac2a83-0a01-4c40-93d2-a7acc0d2d2db","name":"Authorization","originalRequest":{"method":"POST","header":[],"body":{"mode":"formdata","formdata":[{"key":"username","value":" qa@qa.qa","type":"text"},{"key":"password","value":"111","type":"text"}]},"url":{"raw":"{{url}}users/obtain-token","host":["{{url}}users"],"path":["obtain-token"]}},"status":"OK","code":200,"_postman_previewlanguage":"json","header":[{"key":"Server","value":"nginx/1.18.0 (Ubuntu)"},{"key":"Date","value":"Sat, 30 Apr 2022 12:01:35 GMT"},{"key":"Content-Type","value":"application/json"},{"key":"Content-Length","value":"52"},{"key":"Connection","value":"keep-alive"},{"key":"Allow","value":"POST, OPTIONS"},{"key":"X-Frame-Options","value":"DENY"},{"key":"Access-Control-Allow-Credentials","value":"true"},{"key":"Vary","value":"Cookie"},{"key":"X-Content-Type-Options","value":"nosniff"},{"key":"Referrer-Policy","value":"same-origin"}],"cookie":[],"responseTime":null,"body":"{\n    \"token\": \"a3f1f7e29076fc6ecc4f3b49c7ee8e71c605a37c\"\n}"}]},{"name":"CreateDriver","event":[{"listen":"test","script":{"id":"1e45ac6f-c4f9-414e-a0ad-8ada24f2e4f4","exec":["pm.test(\"Status code is 201 Driver was created\", function () {\r","    pm.response.to.have.status(201);   \r","});\r","if(pm.response.code == 201){\r","    var jsonData = JSON.parse(responseBody)\r","    pm.environment.set(\"DriversId\", jsonData.id)\r","}"],"type":"text/javascript"}},{"listen":"prerequest","script":{"id":"bedba685-82ea-4b7e-8bdb-9fd5c4c5ed22","exec":["    function Min_Max(min, max) {\r","        return Math.floor(Math.random() * (max - min)) + min;\r","    }\r","    function getNumbWithPadding(min, max){\r","        var a = Min_Max(min, max);\r","        if (a<10){\r","            a = \"0\" + a\r","        }\r","        return a;\r","    }\r","    pm.variables.set('birth_date', `${Min_Max(1990,2000)}-${getNumbWithPadding(1,13)}-${getNumbWithPadding(1,28)}`);\r","    pm.variables.set('driving_experience_started', `${Min_Max(2015,2022)}-${getNumbWithPadding(1,13)}-${getNumbWithPadding(1,28)}`);\r","    pm.variables.set('number', '012345');//'${Min_Max(100000,1000000)}');\r","    pm.variables.set('series', '1234');//'${Min_Max(1000,10000)}');   "],"type":"text/javascript"}}],"id":"b561ff7e-6737-44f5-9292-dfeb8e50937b","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Authorization","value":"Token {{token}}","type":"text"}],"body":{"mode":"raw","raw":"{\r\n\"first_name\": \"Иван\",\r\n\"last_name\": \"Иванов\",\r\n\"patronymic\": \"Иванович\",\r\n  \"birth_date\": \"{{birth_date}}\",\r\n  \"driving_experience_started\": \"{{driving_experience_started}}\",\r\n  \"driver_licenses\": [\r\n    {\r\n      \"credential_type\": \"DRIVER_LICENSE\",\r\n      \"number\": \"{{number}}\",\r\n      \"series\": \"{{series}}\",\r\n      \"issue_date\": \"{{driving_experience_started}}\"\r\n    }\r\n  ]\r\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{url}}v1/insured_objects/drivers","host":["{{url}}v1"],"path":["insured_objects","drivers"]}},"response":[{"id":"de981bee-d652-4e63-94bd-a7708accc85e","name":"CreateDriver","originalRequest":{"method":"POST","header":[{"key":"Authorization","value":"Token a3f1f7e29076fc6ecc4f3b49c7ee8e71c605a37c","type":"text"}],"body":{"mode":"raw","raw":"{\r\n  \"first_name\": \"{{$randomFirstName}}\",\r\n  \"last_name\": \"{{$randomLastName}}\",\r\n  \"patronymic\": \"Victorovich\",\r\n  \"birth_date\": \"{{birth_date}}\",\r\n  \"driving_experience_started\": \"{{driving_experience_started}}\",\r\n  \"driver_licenses\": [\r\n    {\r\n      \"credential_type\": \"DRIVER_LICENSE\",\r\n      \"number\": \"{{number}}\",\r\n      \"series\": \"{{series}}\",\r\n      \"issue_date\": \"{{driving_experience_started}}\"\r\n    }\r\n  ]\r\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{url}}insured_objects/drivers","host":["{{url}}insured_objects"],"path":["drivers"]}},"status":"Created","code":201,"_postman_previewlanguage":"json","header":[{"key":"Server","value":"nginx/1.18.0 (Ubuntu)"},{"key":"Date","value":"Sat, 30 Apr 2022 13:20:59 GMT"},{"key":"Content-Type","value":"application/json"},{"key":"Content-Length","value":"518"},{"key":"Connection","value":"keep-alive"},{"key":"Allow","value":"GET, POST, HEAD, OPTIONS"},{"key":"X-Frame-Options","value":"DENY"},{"key":"Access-Control-Allow-Credentials","value":"true"},{"key":"Vary","value":"Cookie"},{"key":"X-Content-Type-Options","value":"nosniff"},{"key":"Referrer-Policy","value":"same-origin"}],"cookie":[],"responseTime":null,"body":"{\n    \"id\": \"332c10f0-0fb0-487c-8c5b-78772826ce14\",\n    \"fact_address\": null,\n    \"legal_address\": null,\n    \"contact\": [],\n    \"driver_licenses\": [\n        {\n            \"number\": \"012345\",\n            \"series\": \"1234\",\n            \"issue_date\": \"2017-05-03\",\n            \"credential_type\": \"DRIVER_LICENSE\"\n        }\n    ],\n    \"first_name\": \"Samson\",\n    \"last_name\": \"Schuster\",\n    \"patronymic\": \"Victorovich\",\n    \"previous_last_name\": null,\n    \"birth_date\": \"1994-10-15\",\n    \"gender\": \"M\",\n    \"driving_experience_started\": \"2017-05-03\",\n    \"is_rsa_checked\": false,\n    \"is_kbm_found\": false,\n    \"kbm_value\": \"1.00\",\n    \"previous_policy_serial\": null,\n    \"previous_policy_number\": null\n}"}]},{"name":"CreateOwner","event":[{"listen":"prerequest","script":{"id":"cc9a6336-bde4-4883-9321-fb5d1a70b394","exec":["    function Min_Max(min, max) {\r","        return Math.floor(Math.random() * (max - min)) + min;\r","    }\r","    function getNumbWithPadding(min, max){\r","        var a = Min_Max(min, max);\r","        if (a<10){\r","            a = \"0\" + a\r","        }\r","        return a;\r","    }\r","    pm.variables.set('birth_date', `${Min_Max(1990,2000)}-${getNumbWithPadding(1,13)}-${getNumbWithPadding(1,28)}`);"],"type":"text/javascript"}},{"listen":"test","script":{"id":"c367511a-bd55-4648-8606-4d88b0b46117","exec":["pm.test(\"Status code is 201 Owner was created\", function () {\r","    pm.response.to.have.status(201);   \r","});\r","if(pm.response.code == 201){\r","    var jsonData = JSON.parse(responseBody)\r","    pm.environment.set(\"OwnerId\", jsonData.person)\r","}"],"type":"text/javascript"}}],"id":"9864c61e-7c60-4090-bf48-21dbca7107aa","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Authorization","value":"Token {{token}}","type":"text"}],"body":{"mode":"raw","raw":"{\r\n\"first_name\": \"Иван\",\r\n\"last_name\": \"Иванов\",\r\n\"patronymic\": \"Иванович\",\r\n  \"birth_date\": \"{{birth_date}}\",\r\n  \"credential\": [\r\n    {\r\n      \"credential_type\": \"RUSSIAN_INTERNAL_PASSPORT\",\r\n      \"issue_date\": \"2017-03-08\",\r\n      \"issue_point\": \"УФМС\",\r\n      \"issue_point_code\": \"123-456\",\r\n      \"number\": \"123456\",\r\n      \"series\": \"1234\"\r\n    }\r\n  ],\r\n  \"address\": [\r\n    {\r\n      \"address_query\": \"г Санкт-Петербург, г Ломоносов, ул Швейцарская, д 1 к 1, кв 1\",\r\n      \"address_type\": \"LEGAL_ADDRESS\",\r\n      \"region_kladr_id\": \"7800000000000\",\r\n      \"city_kladr_id\": \"7800000600000\"\r\n    },\r\n    {\r\n      \"address_query\": \"г Санкт-Петербург, г Ломоносов, ул Швейцарская, д 1 к 1, кв 1\",\r\n      \"address_type\": \"ACTUAL_ADDRESS\",\r\n      \"region_kladr_id\": \"7800000000000\",\r\n      \"city_kladr_id\": \"7800000600000\"\r\n    }\r\n  ]\r\n}\r\n","options":{"raw":{"language":"json"}}},"url":{"raw":"{{url}}v1/insured_objects/owners/natural_persons","host":["{{url}}v1"],"path":["insured_objects","owners","natural_persons"]}},"response":[{"id":"d934564e-3d57-4b2e-9854-781d09a12fc1","name":"CreateOwner","originalRequest":{"method":"POST","header":[{"key":"Authorization","value":"Token a3f1f7e29076fc6ecc4f3b49c7ee8e71c605a37c","type":"text"}],"body":{"mode":"raw","raw":"{\r\n  \"last_name\": \"{{$randomFirstName}}\",\r\n  \"first_name\": \"{{$randomLastName}}\",\r\n  \"patronymic\": \"Igorevich\",\r\n  \"birth_date\": \"{{birth_date}}\",\r\n  \"credential\": [\r\n    {\r\n      \"credential_type\": \"RUSSIAN_INTERNAL_PASSPORT\",\r\n      \"issue_date\": \"2017-03-08\",\r\n      \"issue_point\": \"УФМС\",\r\n      \"issue_point_code\": \"123-456\",\r\n      \"number\": \"123456\",\r\n      \"series\": \"1234\"\r\n    }\r\n  ],\r\n  \"address\": [\r\n    {\r\n      \"address_query\": \"г Санкт-Петербург, г Ломоносов, ул Швейцарская, д 1 к 1, кв 1\",\r\n      \"address_type\": \"LEGAL_ADDRESS\",\r\n      \"region_kladr_id\": \"7800000000000\",\r\n      \"city_kladr_id\": \"7800000600000\"\r\n    },\r\n    {\r\n      \"address_query\": \"г Санкт-Петербург, г Ломоносов, ул Швейцарская, д 1 к 1, кв 1\",\r\n      \"address_type\": \"ACTUAL_ADDRESS\",\r\n      \"region_kladr_id\": \"7800000000000\",\r\n      \"city_kladr_id\": \"7800000600000\"\r\n    }\r\n  ]\r\n}\r\n","options":{"raw":{"language":"json"}}},"url":{"raw":"{{url}}insured_objects/owners/natural_persons","host":["{{url}}insured_objects"],"path":["owners","natural_persons"]}},"status":"Created","code":201,"_postman_previewlanguage":"json","header":[{"key":"Server","value":"nginx/1.18.0 (Ubuntu)"},{"key":"Date","value":"Sat, 30 Apr 2022 13:53:12 GMT"},{"key":"Content-Type","value":"application/json"},{"key":"Content-Length","value":"2436"},{"key":"Connection","value":"keep-alive"},{"key":"Allow","value":"GET, POST, HEAD, OPTIONS"},{"key":"X-Frame-Options","value":"DENY"},{"key":"Access-Control-Allow-Credentials","value":"true"},{"key":"Vary","value":"Cookie"},{"key":"X-Content-Type-Options","value":"nosniff"},{"key":"Referrer-Policy","value":"same-origin"}],"cookie":[],"responseTime":null,"body":"{\n    \"id\": \"edc9e06b-92d6-405b-bc00-f3bc9127c402\",\n    \"credential\": [\n        {\n            \"issue_date\": \"2017-03-08\",\n            \"issue_point\": \"УФМС\",\n            \"issue_point_code\": \"123-456\",\n            \"credential_type\": \"RUSSIAN_INTERNAL_PASSPORT\",\n            \"number\": \"123456\",\n            \"series\": \"1234\"\n        }\n    ],\n    \"address\": [\n        {\n            \"data\": {},\n            \"address_query\": \"г Санкт-Петербург, г Ломоносов, ул Швейцарская, д 1 к 1, кв 1\",\n            \"address_type\": \"ACTUAL_ADDRESS\",\n            \"region_kladr_id\": \"7800000000000\",\n            \"city_kladr_id\": \"7800000600000\",\n            \"settlement_kladr_id\": null,\n            \"street_kladr_id\": null,\n            \"house_kladr_id\": null,\n            \"is_without_flat\": true,\n            \"house\": null,\n            \"block\": null,\n            \"flat\": null,\n            \"region_fias_id\": null,\n            \"city_fias_id\": null,\n            \"settlement_fias_id\": null,\n            \"street_fias_id\": null\n        },\n        {\n            \"data\": {},\n            \"address_query\": \"г Санкт-Петербург, г Ломоносов, ул Швейцарская, д 1 к 1, кв 1\",\n            \"address_type\": \"LEGAL_ADDRESS\",\n            \"region_kladr_id\": \"7800000000000\",\n            \"city_kladr_id\": \"7800000600000\",\n            \"settlement_kladr_id\": null,\n            \"street_kladr_id\": null,\n            \"house_kladr_id\": null,\n            \"is_without_flat\": true,\n            \"house\": null,\n            \"block\": null,\n            \"flat\": null,\n            \"region_fias_id\": null,\n            \"city_fias_id\": null,\n            \"settlement_fias_id\": null,\n            \"street_fias_id\": null\n        }\n    ],\n    \"person\": \"8d9498d9-d8a1-4b36-b301-4dc73b408ba5\",\n    \"fact_address\": {\n        \"data\": {},\n        \"address_query\": \"г Санкт-Петербург, г Ломоносов, ул Швейцарская, д 1 к 1, кв 1\",\n        \"address_type\": \"ACTUAL_ADDRESS\",\n        \"region_kladr_id\": \"7800000000000\",\n        \"city_kladr_id\": \"7800000600000\",\n        \"settlement_kladr_id\": null,\n        \"street_kladr_id\": null,\n        \"house_kladr_id\": null,\n        \"is_without_flat\": true,\n        \"house\": null,\n        \"block\": null,\n        \"flat\": null,\n        \"region_fias_id\": null,\n        \"city_fias_id\": null,\n        \"settlement_fias_id\": null,\n        \"street_fias_id\": null\n    },\n    \"legal_address\": {\n        \"data\": {},\n        \"address_query\": \"г Санкт-Петербург, г Ломоносов, ул Швейцарская, д 1 к 1, кв 1\",\n        \"address_type\": \"LEGAL_ADDRESS\",\n        \"region_kladr_id\": \"7800000000000\",\n        \"city_kladr_id\": \"7800000600000\",\n        \"settlement_kladr_id\": null,\n        \"street_kladr_id\": null,\n        \"house_kladr_id\": null,\n        \"is_without_flat\": true,\n        \"house\": null,\n        \"block\": null,\n        \"flat\": null,\n        \"region_fias_id\": null,\n        \"city_fias_id\": null,\n        \"settlement_fias_id\": null,\n        \"street_fias_id\": null\n    },\n    \"contact\": [],\n    \"first_name\": \"McDermott\",\n    \"last_name\": \"Angie\",\n    \"patronymic\": \"Igorevich\",\n    \"previous_last_name\": null,\n    \"birth_date\": \"1994-11-10\",\n    \"gender\": \"M\",\n    \"driving_experience_started\": null,\n    \"is_rsa_checked\": false,\n    \"is_kbm_found\": false,\n    \"kbm_value\": \"1.00\",\n    \"previous_policy_serial\": null,\n    \"previous_policy_number\": null\n}"}]},{"name":"CreateInsurants","event":[{"listen":"prerequest","script":{"id":"9e4ce1d7-4bfb-4fd4-9bbd-b698330da426","exec":["    function Min_Max(min, max) {\r","        return Math.floor(Math.random() * (max - min)) + min;\r","    }\r","    function getNumbWithPadding(min, max){\r","        var a = Min_Max(min, max);\r","        if (a<10){\r","            a = \"0\" + a\r","        }\r","        return a;\r","    }\r","    pm.variables.set('birth_date', `${Min_Max(1990,2000)}-${getNumbWithPadding(1,13)}-${getNumbWithPadding(1,28)}`);"],"type":"text/javascript"}},{"listen":"test","script":{"id":"1e7e175e-2352-4ce4-9263-4df45f773b9c","exec":["pm.test(\"Status code is 201 Insurant was created\", function () {\r","    pm.response.to.have.status(201);   \r","});\r","if(pm.response.code == 201){\r","    var jsonData = JSON.parse(responseBody)\r","    pm.environment.set(\"InsurantId\", jsonData.person)\r","}"],"type":"text/javascript"}}],"id":"35355acc-9b53-42ea-9bab-924a7ea7864f","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Authorization","value":"Token {{token}}","type":"text"}],"body":{"mode":"raw","raw":"{\r\n\"first_name\": \"Иван\",\r\n\"last_name\": \"Иванов\",\r\n\"patronymic\": \"Иванович\",\r\n  \"birth_date\": \"{{birth_date}}\",\r\n  \"contact\": [\r\n            {\r\n                \"contact_type\": \"EMAIL\",\r\n                \"data\": \"ljl@tyry.yu\",\r\n                \"comment\": null\r\n            },\r\n            {\r\n                \"contact_type\": \"PHONE\",\r\n                \"data\": \"+7 (999) 999-99-89\",\r\n                \"comment\": null\r\n            }\r\n        ],\r\n  \"credential\": [\r\n    {\r\n      \"credential_type\": \"RUSSIAN_INTERNAL_PASSPORT\",\r\n      \"issue_date\": \"2010-10-10\",\r\n      \"issue_point\": \"УФМС\",\r\n      \"issue_point_code\": \"123-456\",\r\n      \"number\": \"123456\",\r\n      \"series\": \"1234\"\r\n    }\r\n  ],\r\n  \"address\": [\r\n    {\r\n      \"address_query\": \"г Санкт-Петербург, г Ломоносов, ул Швейцарская, д 1 к 1, кв 1\",\r\n      \"address_type\": \"LEGAL_ADDRESS\",\r\n      \"region_kladr_id\": \"7800000000000\",\r\n      \"city_kladr_id\": \"7800000600000\"\r\n    },\r\n    {\r\n      \"address_query\": \"г Санкт-Петербург, г Ломоносов, ул Швейцарская, д 1 к 1, кв 1\",\r\n      \"address_type\": \"ACTUAL_ADDRESS\",\r\n      \"region_kladr_id\": \"7800000000000\",\r\n      \"city_kladr_id\": \"7800000600000\"\r\n    }\r\n  ]\r\n}\r\n","options":{"raw":{"language":"json"}}},"url":{"raw":"{{url}}v1/insured_objects/insurants/natural_persons","host":["{{url}}v1"],"path":["insured_objects","insurants","natural_persons"]}},"response":[{"id":"e76c5b35-dcfe-40d3-a08e-7a61c94d6586","name":"CreateInsurants","originalRequest":{"method":"POST","header":[{"key":"Authorization","value":"Token a3f1f7e29076fc6ecc4f3b49c7ee8e71c605a37c","type":"text"}],"body":{"mode":"raw","raw":"{\r\n  \"last_name\": \"{{$randomFirstName}}\",\r\n  \"first_name\": \"{{$randomLastName}}\",\r\n  \"patronymic\": \"Alexandrovich\",\r\n  \"birth_date\": \"{{birth_date}}\",\r\n  \"credential\": [\r\n    {\r\n      \"credential_type\": \"RUSSIAN_INTERNAL_PASSPORT\",\r\n      \"issue_date\": \"2010-10-10\",\r\n      \"issue_point\": \"УФМС\",\r\n      \"issue_point_code\": \"123-456\",\r\n      \"number\": \"123456\",\r\n      \"series\": \"1234\"\r\n    }\r\n  ],\r\n  \"address\": [\r\n    {\r\n      \"address_query\": \"г Санкт-Петербург, г Ломоносов, ул Швейцарская, д 1 к 1, кв 1\",\r\n      \"address_type\": \"LEGAL_ADDRESS\",\r\n      \"region_kladr_id\": \"7800000000000\",\r\n      \"city_kladr_id\": \"7800000600000\"\r\n    },\r\n    {\r\n      \"address_query\": \"г Санкт-Петербург, г Ломоносов, ул Швейцарская, д 1 к 1, кв 1\",\r\n      \"address_type\": \"ACTUAL_ADDRESS\",\r\n      \"region_kladr_id\": \"7800000000000\",\r\n      \"city_kladr_id\": \"7800000600000\"\r\n    }\r\n  ]\r\n}\r\n","options":{"raw":{"language":"json"}}},"url":{"raw":"{{url}}insured_objects/insurants/natural_persons","host":["{{url}}insured_objects"],"path":["insurants","natural_persons"]}},"status":"Created","code":201,"_postman_previewlanguage":"json","header":[{"key":"Server","value":"nginx/1.18.0 (Ubuntu)"},{"key":"Date","value":"Sat, 30 Apr 2022 14:07:16 GMT"},{"key":"Content-Type","value":"application/json"},{"key":"Content-Length","value":"2437"},{"key":"Connection","value":"keep-alive"},{"key":"Allow","value":"GET, POST, HEAD, OPTIONS"},{"key":"X-Frame-Options","value":"DENY"},{"key":"Access-Control-Allow-Credentials","value":"true"},{"key":"Vary","value":"Cookie"},{"key":"X-Content-Type-Options","value":"nosniff"},{"key":"Referrer-Policy","value":"same-origin"}],"cookie":[],"responseTime":null,"body":"{\n    \"id\": \"f90e5b2a-ffd5-4e02-a0e2-1f33b54ae9f0\",\n    \"credential\": [\n        {\n            \"issue_date\": \"2010-10-10\",\n            \"issue_point\": \"УФМС\",\n            \"issue_point_code\": \"123-456\",\n            \"credential_type\": \"RUSSIAN_INTERNAL_PASSPORT\",\n            \"number\": \"123456\",\n            \"series\": \"1234\"\n        }\n    ],\n    \"address\": [\n        {\n            \"data\": {},\n            \"address_query\": \"г Санкт-Петербург, г Ломоносов, ул Швейцарская, д 1 к 1, кв 1\",\n            \"address_type\": \"ACTUAL_ADDRESS\",\n            \"region_kladr_id\": \"7800000000000\",\n            \"city_kladr_id\": \"7800000600000\",\n            \"settlement_kladr_id\": null,\n            \"street_kladr_id\": null,\n            \"house_kladr_id\": null,\n            \"is_without_flat\": true,\n            \"house\": null,\n            \"block\": null,\n            \"flat\": null,\n            \"region_fias_id\": null,\n            \"city_fias_id\": null,\n            \"settlement_fias_id\": null,\n            \"street_fias_id\": null\n        },\n        {\n            \"data\": {},\n            \"address_query\": \"г Санкт-Петербург, г Ломоносов, ул Швейцарская, д 1 к 1, кв 1\",\n            \"address_type\": \"LEGAL_ADDRESS\",\n            \"region_kladr_id\": \"7800000000000\",\n            \"city_kladr_id\": \"7800000600000\",\n            \"settlement_kladr_id\": null,\n            \"street_kladr_id\": null,\n            \"house_kladr_id\": null,\n            \"is_without_flat\": true,\n            \"house\": null,\n            \"block\": null,\n            \"flat\": null,\n            \"region_fias_id\": null,\n            \"city_fias_id\": null,\n            \"settlement_fias_id\": null,\n            \"street_fias_id\": null\n        }\n    ],\n    \"person\": \"61438edc-d8bc-4c2a-a6ce-011f345b5d1b\",\n    \"fact_address\": {\n        \"data\": {},\n        \"address_query\": \"г Санкт-Петербург, г Ломоносов, ул Швейцарская, д 1 к 1, кв 1\",\n        \"address_type\": \"ACTUAL_ADDRESS\",\n        \"region_kladr_id\": \"7800000000000\",\n        \"city_kladr_id\": \"7800000600000\",\n        \"settlement_kladr_id\": null,\n        \"street_kladr_id\": null,\n        \"house_kladr_id\": null,\n        \"is_without_flat\": true,\n        \"house\": null,\n        \"block\": null,\n        \"flat\": null,\n        \"region_fias_id\": null,\n        \"city_fias_id\": null,\n        \"settlement_fias_id\": null,\n        \"street_fias_id\": null\n    },\n    \"legal_address\": {\n        \"data\": {},\n        \"address_query\": \"г Санкт-Петербург, г Ломоносов, ул Швейцарская, д 1 к 1, кв 1\",\n        \"address_type\": \"LEGAL_ADDRESS\",\n        \"region_kladr_id\": \"7800000000000\",\n        \"city_kladr_id\": \"7800000600000\",\n        \"settlement_kladr_id\": null,\n        \"street_kladr_id\": null,\n        \"house_kladr_id\": null,\n        \"is_without_flat\": true,\n        \"house\": null,\n        \"block\": null,\n        \"flat\": null,\n        \"region_fias_id\": null,\n        \"city_fias_id\": null,\n        \"settlement_fias_id\": null,\n        \"street_fias_id\": null\n    },\n    \"contact\": [],\n    \"first_name\": \"Metz\",\n    \"last_name\": \"Maxwell\",\n    \"patronymic\": \"Alexandrovich\",\n    \"previous_last_name\": null,\n    \"birth_date\": \"1993-04-24\",\n    \"gender\": \"M\",\n    \"driving_experience_started\": null,\n    \"is_rsa_checked\": false,\n    \"is_kbm_found\": false,\n    \"kbm_value\": \"1.00\",\n    \"previous_policy_serial\": null,\n    \"previous_policy_number\": null\n}"}]},{"name":"CreateCars","event":[{"listen":"test","script":{"id":"5e556c80-a151-4489-94f2-1e85a94c24f9","exec":["pm.test(\"Status code is 201 Car was created\", function () {\r","    pm.response.to.have.status(201);   \r","});\r","if(pm.response.code == 201){\r","    var jsonData = JSON.parse(responseBody)\r","    pm.environment.set(\"CarId\", jsonData.id)\r","}"],"type":"text/javascript"}}],"id":"4f7b1ecd-6190-42e0-a0b7-6788dc7d44e5","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Authorization","value":"Token {{token}}","type":"text"}],"body":{"mode":"raw","raw":"{\r\n  \"car_model_id\": 864026180,\r\n  \"engine_power\": 211,\r\n  \"chassis_number\": 98,\r\n  \"car_body_number\": 78,\r\n  \"vin_number\": \"WAUZZZ8T4BA037241\",\r\n  \"number_plate\": \"Р904МХ178\",\r\n  \"manufacturing_year\": 2010,\r\n  \"max_mass\": null,\r\n  \"credential\": [\r\n    {\r\n      \"credential_type\": \"VEHICLE_REGISTRATION\",\r\n      \"issue_date\": \"2010-11-01\",\r\n      \"number\": \"267461\",\r\n      \"series\": \"78УН\"\r\n    }\r\n  ]\r\n}\r\n","options":{"raw":{"language":"json"}}},"url":{"raw":"{{url}}v3/insured_objects/cars","host":["{{url}}v3"],"path":["insured_objects","cars"]}},"response":[{"id":"e3e4c6c5-3131-4891-961f-e385093723a1","name":"CreateCars","originalRequest":{"method":"POST","header":[{"key":"Authorization","value":"Token {{token}}","type":"text"}],"body":{"mode":"raw","raw":"{\r\n  \"car_model_id\": 864026180,\r\n  \"engine_power\": 211,\r\n  \"chassis_number\": 98,\r\n  \"car_body_number\": 78,\r\n  \"vin_number\": \"WAUZZZ8T4BA037241\",\r\n  \"number_plate\": \"Р904МХ178\",\r\n  \"manufacturing_year\": 2010,\r\n  \"max_mass\": null,\r\n  \"credential\": [\r\n    {\r\n      \"credential_type\": \"VEHICLE_REGISTRATION\",\r\n      \"issue_date\": \"2010-11-01\",\r\n      \"number\": \"267461\",\r\n      \"series\": \"78УН\"\r\n    }\r\n  ]\r\n}\r\n","options":{"raw":{"language":"json"}}},"url":{"raw":"{{url}}v3/insured_objects/cars","host":["{{url}}v3"],"path":["insured_objects","cars"]}},"status":"Created","code":201,"_postman_previewlanguage":"json","header":[{"key":"Server","value":"nginx/1.18.0 (Ubuntu)"},{"key":"Date","value":"Sat, 30 Apr 2022 14:39:51 GMT"},{"key":"Content-Type","value":"application/json"},{"key":"Content-Length","value":"1066"},{"key":"Connection","value":"keep-alive"},{"key":"Allow","value":"GET, POST, PATCH, HEAD, OPTIONS"},{"key":"X-Frame-Options","value":"DENY"},{"key":"Access-Control-Allow-Credentials","value":"true"},{"key":"Vary","value":"Cookie"},{"key":"X-Content-Type-Options","value":"nosniff"},{"key":"Referrer-Policy","value":"same-origin"}],"cookie":[],"responseTime":null,"body":"{\n    \"id\": \"b73b5e71-07a1-4b09-b649-d239b50896f3\",\n    \"credential\": [\n        {\n            \"id\": \"beab0e72-d8c9-4eda-97f9-4d26aa76dd9b\",\n            \"issue_date\": \"2010-11-01\",\n            \"issue_point\": null,\n            \"issue_point_code\": null,\n            \"expiration_date\": null,\n            \"number\": \"267461\",\n            \"series\": \"78УН\",\n            \"credential_type\": \"VEHICLE_REGISTRATION\"\n        },\n        {\n            \"id\": \"421ee2eb-1086-471b-9c94-83da8f06726f\",\n            \"issue_date\": \"2022-03-20\",\n            \"issue_point\": null,\n            \"issue_point_code\": null,\n            \"expiration_date\": \"2023-03-20\",\n            \"number\": \"104620922205969\",\n            \"series\": null,\n            \"credential_type\": \"DIAGNOSTIC_CHART\"\n        }\n    ],\n    \"car_mark\": \"Audi\",\n    \"car_mark_id\": \"471\",\n    \"car_type\": \"B\",\n    \"car_model\": \"A5\",\n    \"car_model_id\": \"864026180\",\n    \"rsa_code\": \"9020018\",\n    \"manufacturing_year\": 2010,\n    \"vin_number\": \"WAUZZZ8T4BA037241\",\n    \"car_body_number\": null,\n    \"chassis_number\": null,\n    \"car_modification\": null,\n    \"car_modification_id\": null,\n    \"transdekra_id\": null,\n    \"transdekra_modification\": null,\n    \"number_plate\": \"Р904МХ178\",\n    \"has_trailer\": false,\n    \"is_foreign\": true,\n    \"color\": null,\n    \"engine_displacement\": null,\n    \"engine_power\": 211,\n    \"pts_mark\": null,\n    \"pts_model\": null,\n    \"max_mass\": null,\n    \"seats_count\": null,\n    \"is_rsa_checked\": false,\n    \"is_deprecated\": false\n}"}]},{"name":"CreateInsuredObjects","event":[{"listen":"prerequest","script":{"id":"430f86a7-0808-498b-8426-318f075e673d","exec":[""],"type":"text/javascript"}},{"listen":"test","script":{"id":"5ee46155-2e47-4600-985a-12f552051d04","exec":["pm.test(\"Status code is 201 Insured Objects was created\", function () {\r","    pm.response.to.have.status(201);   \r","});\r","if(pm.response.code == 201){\r","    var jsonData = JSON.parse(responseBody)\r","    pm.environment.set(\"InsuredObjectId\", jsonData.id)\r","}"],"type":"text/javascript"}}],"id":"110a26ef-d65a-4b4e-a1c2-ad2d44d41422","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Authorization","value":"Token {{token}}","type":"text"}],"body":{"mode":"raw","raw":"{\r\n    \"drivers\": [\"{{DriversId}}\"],\r\n    \"owner\": \"{{OwnerId}}\",\r\n    \"car\": \"{{CarId}}\",\r\n    \"insurant\": \"{{InsurantId}}\"\r\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{url}}v1/insured_objects/","host":["{{url}}v1"],"path":["insured_objects",""]}},"response":[]},{"name":"CreateAgreements","event":[{"listen":"test","script":{"id":"9b7fbcee-d5ca-4eeb-9664-822e5a098e0f","exec":["pm.test(\"Status code is 200 Agreements was created\", function () {\r","    pm.response.to.have.status(200);   \r","});\r","if(pm.response.code == 200){\r","    var jsonData = JSON.parse(responseBody)\r","    pm.environment.set(\"AgrimentsId\", jsonData.id)\r","}\r",""],"type":"text/javascript"}},{"listen":"prerequest","script":{"id":"6d8add12-1b14-4e82-bc6d-2a6d8c602882","exec":["   function Min_Max(min, max) {\r","        return Math.floor(Math.random() * (max - min)) + min;\r","    }\r","    function getNumbWithPadding(min, max){\r","        var a = Min_Max(min, max);\r","        if (a<10){\r","            a = \"0\" + a\r","        }\r","        return a;\r","    }\r","    var year = Min_Max(2022,2022);\r","    var month = getNumbWithPadding(5,6)\r","    var day = getNumbWithPadding(5,28)\r","    pm.variables.set('valid_from', `${year}-${month}-${day}`);\r","    pm.variables.set('start_date', `${year}-${month}-${Number(day)+1}`);\r","    pm.variables.set('valid_to', `${year+1}-${month}-${day-1}`);"],"type":"text/javascript"}}],"id":"c7bc03cd-aefb-4457-ad0a-e9e077149d35","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Authorization","value":"Token {{token}}","type":"text"}],"body":{"mode":"raw","raw":"{\r\n   \"valid_from\": \"{{valid_from}}\",\r\n    \"valid_to\": \"{{valid_to}}\",\r\n    \"insurance_period\": 8,\r\n    \"target_of_using\": \"11\",\r\n\r\n    \"drivers_ids\": [\"{{DriversId}}\"],\r\n    \"is_car_without_registration\": false,\r\n    \"engine_power\": 211,\r\n    \"has_car_trailer\": false,\r\n    \"car_type\": \"B\",\r\n    \"owner_registration\": {\r\n        \"address_query\": \"г Санкт-Петербург, г Ломоносов, ул Швейцарская, д 1 к 1, кв 1\"\r\n    },\r\n    \"periods\": [],\r\n    \"start_date\": \"{{start_date}}\"\r\n\r\n\r\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{url}}v3/agreements/calculations","host":["{{url}}v3"],"path":["agreements","calculations"]}},"response":[]},{"name":"PatchAgreements","event":[{"listen":"test","script":{"id":"db581fd0-8438-4633-8b98-200241491f46","exec":["pm.test(\"Status code is 200 Agreements was patched\", function () {\r","    pm.response.to.have.status(200);   \r","});"],"type":"text/javascript"}}],"id":"72621b35-c53c-477d-8c44-847b0346caeb","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"PATCH","header":[{"key":"Authorization","value":"Token {{token}}","type":"text"}],"body":{"mode":"raw","raw":"{\r\n    \"insured_object\": \"{{InsuredObjectId}}\"\r\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{url}}v1/agreements/{{AgrimentsId}}","host":["{{url}}v1"],"path":["agreements","{{AgrimentsId}}"]}},"response":[]},{"name":"GetResults","event":[{"listen":"test","script":{"id":"7d0ea228-6e72-4d50-9786-90ca1ad34fcf","exec":["pm.test(\"Status code is 200 Results here\", function () {\r","    pm.response.to.have.status(200);\r","    var jsonData = JSON.parse(responseBody)\r","    console.log(jsonData.parameters.integrated_company_title, jsonData.parameters.integrated_company_code, jsonData.parameters.premium)\r","});\r","\r","var companies = JSON.parse(pm.environment.get(\"Companies\"));\r","if (companies.length > 0) {\r","    postman.setNextRequest(\"GetResults\");\r","} else {\r","    postman.setNextRequest(null);\r","    pm.environment.set('Companies', \"\");\r","}"],"type":"text/javascript"}},{"listen":"prerequest","script":{"id":"9d7147ba-0cd0-4d87-a4ad-58bf61c73ae2","exec":["if (!pm.environment.get('Companies')) {\r","    pm.environment.set(\"Companies\", JSON.stringify(\r","        [\"ZETTA\",\"ALPHA_STRAH\", \"RENAISSANCE\", \"SDS\", \"RGS\", \"SNGI\", \"UGORIA\", \"INGOSSTRAH\", \"TINKOFF\"]\r","    ))\r","}\r","var companies = JSON.parse(pm.environment.get('Companies'));\r","if (companies.length > 0) {\r","    pm.environment.set('InsuranceCompany', companies.shift());\r","    pm.environment.set('Companies', JSON.stringify(companies));\r","}"],"type":"text/javascript"}}],"id":"20d5ae8c-3c70-4f3f-b5d5-e52f5b616fce","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Authorization","value":"Token {{token}}","type":"text"}],"body":{"mode":"raw","raw":"","options":{"raw":{"language":"json"}}},"url":{"raw":"{{url}}v1/agreements/{{AgrimentsId}}/results/{{InsuranceCompany}}","host":["{{url}}v1"],"path":["agreements","{{AgrimentsId}}","results","{{InsuranceCompany}}"]}},"response":[]}]}